<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>LLS Animals</title>
    <link rel="icon" href="img/logoperro.png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <link rel="stylesheet" href="diseño/inicio.css">
</head>

<body>
    <header>
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="logo py-3 pl-4">
                        <img src="img/logoperro.png" alt="Logo de LLS Animals">
                        <span class="ml-2"> CENTRO DE ADOPCIONES LLS</span>
                    </div>
                </div>
                <div class="col-md-6 text-right">
                    <nav class="navbar navbar-expand-lg navbar-light bg-light">
                        <div class="container-fluid">
                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse" id="navbarNav">
                                <ul class="navbar-nav">
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="http://127.0.0.1:8000/inicio">Inicio</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="http://127.0.0.1:8000/adopta">Adopta</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="#">Donaciones</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="#">Sede</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="#">Contáctanos</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <main>
        <section id="section-1">
            <section class="textos-header">
                <h1>CENTRO DE ADOPCIONES LLS</h1>
                <h3>Transforma vidas, adopta amor! </h3>
                <button type="button" class="btn btn-primary transparent-btn">
                    <a href="http://127.0.0.1:8000/register">
                        <img width="100" height="100" src="https://cdn.icon-icons.com/icons2/3002/PNG/512/footprint_icon_187971.png" alt="Hueso para perro">
                    </a>
                    Adopta un peludito aquí
                </button>
            </section>
            <div class="wave" style="height: 150px; overflow: hidden;">
                <svg viewBox="0 0 500 150" preserveAspectRatio="none" style="height: 100%; width: 100%;">
                    <path d="M-12.69,66.63 C62.92,147.55 334.93,-49.81 518.90,126.81 L500.00,150.00 L0.00,150.00 Z" style="stroke: none; fill: #ffffff;"></path>
                </svg>
            </div>
        </section>

        <section id="section-2">
            <h1 class="titulo">NUESTRA INFORMACIÓN</h1>
            <br><br>
        </section>


        <section id="section-3">

            <div class="informacion">
                <div class="columna">
                    <h2>Sobre nosotros</h2>
<center><p>En LLS, somos un refugio dedicado a encontrar hogares amorosos para cachorros necesitados. Nuestro equipo trabaja con pasión para brindar cuidado y atención a cada animal. Desde el rescate hasta la adopción, nos comprometemos a asegurar que cada cachorro sea amado y protegido de por vida.</p> </center>
                    <img src="https://img.freepik.com/foto-gratis/vista-elevada-perro-humano-acariciando-mano_23-2147840625.jpg?t=st=1713990063~exp=1713993663~hmac=f8192ea81a38e776537ec3afd775012260ebdb92cd4bbcfabfd7925e8c1d5a98&w=740" alt="Descripción de la imagen">
                </div>
                <div class="columna">
                    <h2>Importancia de Adoptar</h2>
<center><p>Adoptar un cachorro es una acción significativa que cambia vidas. Al adoptar, estás ofreciendo un hogar seguro y amoroso a un animal necesitado, contribuyendo a reducir la población de mascotas sin hogar y fomentando la adopción responsable.</p></center>
     <br>            
<img src="https://img.freepik.com/foto-gratis/mujer-sosteniendo-adoptarme-signo-perro-rescate_23-2148682944.jpg?t=st=1713989984~exp=1713993584~hmac=6e36d05e50f6318535781c3efc265bbf220f7b41c9c304e084d6deda91faab9b&w=740" alt="Descripción de la imagen">
                </div>
                <div class="columna">
                    <h2>Misión</h2>
<center><p>Nuestra misión en LLS es unir familias con compañeros peludos, garantizando amor y cuidado en cada adopción. Trabajamos incansablemente para asegurarnos de que cada cachorro encuentre un hogar donde sea amado y cuidado de por vida.</p></center>
                    <img src="https://img.freepik.com/foto-gratis/mujer-acariciando-adorable-perro_23-2148740422.jpg?t=st=1713990666~exp=1713994266~hmac=b1c7ab8c3283746c8436c41a57a8805753bf1b2cc7cf29268d363a000f7c8e34&w=740" alt="Descripción de la imagen">
                </div>
                <div class="columna">
                    <h2>Visión</h2>
                    <center><p>En LLS, visualizamos un mundo donde cada cachorro tenga la oportunidad de ser amado y cuidado en un hogar lleno de amor y comprensión.</p></center>
                    <br>
                    <img src="https://img.freepik.com/foto-gratis/primos-pasando-tiempo-juntos-casa-perro-mascota_23-2150167139.jpg?t=st=1713990788~exp=1713994388~hmac=c1271efb8c474ba72dcbe8fe994fc42822a487c85b7df32b8ef85cba0471f509&w=740" alt="Descripción de la imagen">
                </div>
                <div class="columna">
                    <h2>¿Por qué Adoptar y no Comprar?</h2>
                    <center><p>Adoptar a un cachorro de LLS es más que tener una mascota, es salvar una vida y ser parte de un cambio positivo en la comunidad.</p></center>
                    <br>
                    <img src="https://img.freepik.com/foto-gratis/perro-rescate-disfrutando-ser-mascota-mujer-refugio_23-2148682929.jpg?t=st=1713991104~exp=1713994704~hmac=d017a827a1550b25b7b950aa60ff2af75f628131ea495c22910e6084b33cb277&w=826" alt="Descripción de la imagen">
                </div>
                <div class="columna">
                    <h2>Familias Felices </h2>
<center><p>En LLS, celebramos cada adopción como un paso hacia la felicidad tanto para el cachorro como para la familia adoptante. Creemos en la importancia de crear lazos de amor y compasión entre humanos y animales.</p></center>
                    <img src="https://img.freepik.com/foto-gratis/linda-chica-cachorro-jugueton-comparten-amor-al-aire-libre-generado-ia_188544-24743.jpg?t=st=1713991291~exp=1713994891~hmac=a3679e58a4e23d7ede0736a115ec067679b22d6f995748d38f217afb26fdfd9a&w=826" alt="Descripción de la imagen">
                </div>
            </div>
        </section>
        <section id="section-4">
            @if ($errors->any())
            <div class="alert alert-danger">
                <ul>
                    @foreach ($errors->all() as $error)
                    <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
            @endif

            <form action="{{ route('guardar-comentario') }}" method="POST">
                @csrf
                <h1>Envíanos tus comentarios</h1>
                <div class="form-group">
                    <label for="nombre">Nombre completo:</label>
                    <input type="text" id="nombre" name="nombre" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" class="form-control" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" required>
                </div>

                <div class="form-group">
                    <label for="comentario">Comentario:</label>
                    <textarea id="comentario" name="comentario" class="form-control" rows="5" required></textarea>
                </div>

                <div class="form-group">
                    <label for="valoracion">Valoración:</label>
                    <div class="star-rating" id="star-rating">
                        <span class="far fa-star text-warning" data-value="1"></span>
                        <span class="far fa-star text-warning" data-value="2"></span>
                        <span class="far fa-star text-warning" data-value="3"></span>
                        <span class="far fa-star text-warning" data-value="4"></span>
                        <span class="far fa-star text-warning" data-value="5"></span>
                    </div>
                    <input type="hidden" id="valoracion" name="valoracion" value="0">
                </div>

                <button type="submit" class="btn btn-primary">Enviar comentario</button>
            </form>
            <div>
             <center> <h2>Comentarios</h2></center>   

                <ul id="comentarios-lista"></ul>
                <nav aria-label="Page navigation">
                    <ul class="pagination" id="comentarios-paginacion">
                    </ul>
                </nav>
            </div>
        </section>
    </main>

    <script>
        const stars = document.querySelectorAll('#star-rating .far');

        stars.forEach((star, index) => {
            star.addEventListener('click', () => {
                const ratingValue = index + 1;

                // Reiniciar las estrellas
                stars.forEach(star => {
                    star.classList.remove('fa');
                    star.classList.add('far');
                });

                // Marcar las estrellas seleccionadas
                for (let i = 0; i < ratingValue; i++) {
                    stars[i].classList.remove('far');
                    stars[i].classList.add('fa');
                }

                // Actualizar el valor del campo oculto
                document.getElementById('valoracion').value = ratingValue;
            });
        });
    </script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            var paginaActual = 1;
            var totalPaginas;

            function cargarComentarios(pagina) {
                $.ajax({
                    url: '{{ route("mostrarComentarios") }}',
                    type: 'GET',
                    data: {
                        pagina: pagina
                    },
                    dataType: 'json',
                    success: function(response) {
                        if (response.success) {
                            // Limpiar la lista de comentarios
                            $('#comentarios-lista').empty();

                            var comentarios = response.comentarios; // Acceder directamente a los comentarios
                            $.each(comentarios, function(index, comentario) {
                                // Construir el HTML para cada comentario
                                var valoracionHtml = '';
                                for (var i = 0; i < comentario.valoracion; i++) {
                                    valoracionHtml += '<i class="fas fa-star text-warning"></i>';
                                }
                                var comentarioHtml = '<div class="card mb-3"><div class="card-body"><h5 class="card-title">' + comentario.nombre + '</h5><p class="card-text">' + comentario.comentario + '</p><p class="card-text"><small class="text-muted">' + valoracionHtml + '</small></p></div></div>';
                                $('#comentarios-lista').append(comentarioHtml);
                            });

                            // Actualizar la paginación
                            totalPaginas = response.totalPaginas; // Acceder a las páginas
                            paginaActual = response.paginaActual;
                            console.log(response.paginaActual);
                            console.log(totalPaginas);
                            mostrarPaginacion(totalPaginas, paginaActual); // Acceder a la página actual
                        } else {
                            console.error(response.message);
                        }
                    },
                    error: function(xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            }

            function mostrarPaginacion(totalPaginas, paginaActual) {
                $('#comentarios-paginacion').empty();

                // Botón de "Anterior"
                var anteriorLi = $('<li></li>').addClass('page-item');
                var anteriorLink = $('<a></a>').addClass('page-link').attr('href', '#').attr('aria-label', 'Previous').html('<span aria-hidden="true">&laquo;</span>');
                anteriorLink.on('click', function(e) {
                    e.preventDefault();
                    if (paginaActual > 1) {
                        paginaActual--;
                        cargarComentarios(paginaActual);
                    }
                });
                anteriorLi.append(anteriorLink);
                $('#comentarios-paginacion').append(anteriorLi);

                // Botones de páginas
                for (var i = 1; i <= totalPaginas; i++) {
                    (function(pagina) {
                        var li = $('<li></li>').addClass('page-item');
                        var link = $('<a></a>').addClass('page-link').attr('href', '#').text(pagina);
                        if (pagina === paginaActual) {
                            li.addClass('change');
                        }
                        link.on('click', function(e) {
                            e.preventDefault();
                            cargarComentarios(pagina);
                        });
                        li.append(link);
                        $('#comentarios-paginacion').append(li);
                    })(i);
                }

                // Botón de "Siguiente"
                var siguienteLi = $('<li></li>').addClass('page-item');
                var siguienteLink = $('<a></a>').addClass('page-link').attr('href', '#').attr('aria-label', 'Next').html('<span aria-hidden="true">&raquo;</span>');
                siguienteLink.on('click', function(e) {
                    e.preventDefault();
                    if (paginaActual < totalPaginas) {
                        paginaActual++;
                        cargarComentarios(paginaActual);
                    }
                });
                siguienteLi.append(siguienteLink);
                $('#comentarios-paginacion').append(siguienteLi);
            }

            // Cargar la primera página de comentarios al cargar la página
            cargarComentarios(paginaActual);
        });
    </script>