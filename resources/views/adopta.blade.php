<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>LLS Animals</title>
    <link rel="icon" href="img/logoperro.png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <link rel="stylesheet" href="diseño/adopta.css">
</head>

<body>
    <header>
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="logo py-3 pl-4">
                        <img src="img/logoperro.png" alt="Logo de LLS Animals">
                        <span class="ml-2"> CENTRO DE ADOPCIONES LLS</span>
                    </div>
                </div>
                <div class="col-md-6 text-right">
                    <nav class="navbar navbar-expand-lg navbar-light bg-light">
                        <div class="container-fluid">
                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse" id="navbarNav">
                                <ul class="navbar-nav">
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="http://127.0.0.1:8000/inicio">Inicio</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="http://127.0.0.1:8000/adopta">Adopta</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="#">Donaciones</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="#">Sede</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="#">Contáctanos</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <main>
        <section id="section-1">
            <div class="container-main">
                <!-- Contenedor con imagen y texto -->
                <div class="container mt-3">
                    <div class="text-container">
                        <h4>¿POR QUÉ ES IMPORTANTE TENER EN TU VIDA UN CACHORRO?</h4>
                        <p class="mt-3">Adoptar un cachorro es mucho más que agregar una mascota a la familia;
                            es un acto de compasión y responsabilidad que tiene un impacto significativo en la vida
                            del animal y en la sociedad en general. Al ofrecer un hogar a un cachorro adoptado, no solo
                            le estás brindando amor y cuidado, sino que también estás contribuyendo a reducir la
                            sobrepoblación de animales en refugios y promoviendo una cultura de adopción responsable
                            y ética. Cada adopción cuenta en la misión de crear un mundo donde todos los animales puedan
                            disfrutar de una vida digna y feliz.</p>
                    </div>
                    <div class="image-container">
                        <img src="https://img.freepik.com/foto-gratis/cerrar-borrosa-mujer-sosteniendo-perro_23-2149304307.jpg?t=st=1713992959~exp=1713996559~hmac=c66ea3fee6c8d53e4de1e3de08c2c100b1ebd747c7f17ae7c3a6a0b142f4f967&w=740" alt="Descripción de la imagen">
                    </div>
                </div>
            </div>
        </section>


        <section id="section-2">
            <div class="container-main">
                <!-- Contenedor con texto y luego imagen -->
                <div class="container mt-3">
                    <div class="image-container">
                        <img src="https://img.freepik.com/foto-gratis/foto-estudio-golden-retriever-crema-ingles-aislado-sobre-superficie-blanca_155003-29008.jpg?t=st=1713998064~exp=1714001664~hmac=004221983f183456373ff34345a6b42dfb6a8f1d4dc05a2113ef02994c6781d3&w=740" alt="Descripción de la imagen">
                    </div>
                    <div class="text-container">
                        <h4>COMPROMISO SOCIAL Y FILANTRÓPICO</h4>
                        <p class="mt-3">Nuestro compromiso va más allá de simplemente encontrar hogares para cachorros.
                            En [nombre de tu organización], creemos en el poder transformador de la adopción responsable.
                            Cada vez que un perro encuentra su familia, no solo se construye un lazo especial, sino que
                            también contribuimos a crear comunidades más solidarias y compasivas. A través de programas
                            de educación, promovemos el bienestar animal y fomentamos valores de cuidado y respeto hacia
                            todas las criaturas vivientes. Al elegir adoptar en lugar de comprar, estás apoyando nuestro
                            compromiso social y filantrópico hacia un mundo donde cada mascota tenga un hogar amoroso y
                            digno.</p>
                    </div>
                </div>
            </div>
        </section>



        <section id="section-3">
            <div class="container-main">
                <!-- Contenedor con imagen y luego texto -->
                <div class="container mt-1">
                    <div class="text-container">
                        <h4 class="text-center">REQUISITOS PARA ADOPTANTES</h4>
                        <ul>
                            <li>La persona responsable del peludito debe ser mayor de 25 años.</li>
                            <li>Este o esta pequeñita será miembro de la familia alrededor de 15 años.</li>
                            <li>Diligencia el Pre-formulario de Adopción</li>
                            <li>Los datos ingresados serán verificados por funcionarios de la Fundación (esta verificación tarda 3 días hábiles).</li>
                            <li>Si tu solicitud y todo está en orden, nos contactaremos contigo para coordinar el día en que el peludito que escogiste llegue a tu casa.</li>
                            <li>Por tema del Coronavirus no podemos hacer la visita domiciliaria, por eso te pedimos que grabes un video del lugar donde vivirá el peludito.</li>
                            <li>Es importante tener el tiempo y el espacio para que tú y ellos estén muy bien.</li>
                            <li>Es importante contar con estabilidad económica, desde el primer momento que llegue a tus manos será una gran responsabilidad y requerirá de muchos cuidados y mimos para vivir feliz. Recuerda, todos han sido rescatados.</li>
                        </ul>
                        <p class="text-center">Si cumples con estos requisitos y deseas ser parte de esta hermosa experiencia de adopción, ¡te damos la bienvenida!</p>
                    </div>
                    <div class="image-container">
                        <img src="https://thumbs.dreamstime.com/b/refugio-de-perros-adoptar-vertical-un-perro-en-adopci%C3%B3n-se-ve-triste-mirando-formato-imagen-206875055.jpg" alt="Descripción de la imagen">
                    </div>
                </div>
            </div>
        </section>

        <section id="section-4">
            <div class="container mt-0">
                <h4 class="text-center">LISTA DE ADOPCION DE NUESTROS PELUDITOS</h4>
                <p class="text-center">Estos son nuestros ángeles que buscan poder encontrar su hogar para siempre.
                    Una vez escojas al peludito que quieras adoptar, vuelve a la página de adopción, lee cuidadosamente nuestros requisitos, proceso de adopción y por último, rellena el formulario de adopción.</p>
            </div>
        </section>

        <section id="section-5">
        @if(session('success'))
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ session('success') }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        @endif

        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-header">
                            Filtros
                        </div>
                        <div class="card-body">
                            <form id="form-filtros">
                                <div class="form-group">
                                    <label for="raza">Raza</label>
                                    <select class="form-control" id="raza">
                                        <?php $razas = []; ?>
                                        @foreach($perros as $perro)
                                        <?php
                                        if (!in_array($perro->raza, $razas)) {
                                            $razas[] = $perro->raza;
                                        ?>
                                            <option value="{{ $perro->raza }}">{{ $perro->raza }}</option>
                                        <?php } ?>
                                        @endforeach
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="enfermedad">Enfermedades</label>
                                    <select class="form-control" id="enfermedad" multiple>
                                        <?php $enfermedades = []; ?>
                                        @foreach($perros as $perro)
                                        @foreach($perro->enfermedades as $enfermedad)
                                        <?php
                                        if (!in_array($enfermedad, $enfermedades)) {
                                            $enfermedades[] = $enfermedad;
                                        ?>
                                            <option value="{{ $enfermedad }}">{{ $enfermedad }}</option>
                                        <?php } ?>
                                        @endforeach
                                        @endforeach
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="vacuna">Vacunas</label>
                                    <select class="form-control" id="vacuna" multiple>
                                        <?php $vacunas = []; ?>
                                        @foreach($perros as $perro)
                                        @foreach($perro->vacunas as $vacuna)
                                        <?php
                                        if (!in_array($vacuna, $vacunas)) {
                                            $vacunas[] = $vacuna;
                                        ?>
                                            <option value="{{ $vacuna }}">{{ $vacuna }}</option>
                                        <?php } ?>
                                        @endforeach
                                        @endforeach
                                    </select>
                                </div>
                                <button class="btn btn-adoptame mt-2">Buscar</button>
                                <button class="btn btn-secondary mt-2" id="limpiar-filtros">Limpiar filtros</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-9">
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" data-toggle="tab" href="#perroscachorros">Cachorros</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#perrosjovenes">Perros Jovenes</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#perrosadultos">Perros Adultos</a>
                        </li>
                    </ul>

                    <div class="tab-content">
                        <div id="perroscachorros" class="tab-pane fade show active">
                            <div class="row">
                                @foreach($perros as $perro)
                                @if($perro->tipo == 'cachorros')
                                <div class="col-md-4">
                                    <div class="card mb-3 card-perro" data-raza="{{ $perro->raza }}" data-enfermedades="{{ json_encode($perro->enfermedades) }}" data-vacunas="{{ json_encode($perro->vacunas) }}">
                                        <img class="card-img-top img-fluid" src="{{ asset($perro->imagen) }}" alt="{{ $perro->nombre }}">
                                        <div class="card-body">
                                            <h5 class="card-title">{{ $perro->nombre }}</h5>
                                            <button class="btn btn-primary mt-2">Adóptame</button>
                                        </div>
                                    </div>
                                </div>
                                @endif
                                @endforeach
                            </div>
                        </div>
                        <div id="perrosjovenes" class="tab-pane fade">
                            <div class="row">
                                @foreach($perros as $perro)
                                @if($perro->tipo == 'jovenes')
                                <div class="col-md-4">
                                    <div class="card mb-3 card-perro" data-raza="{{ $perro->raza }}" data-enfermedades="{{ json_encode($perro->enfermedades) }}" data-vacunas="{{ json_encode($perro->vacunas) }}">
                                        <img class="card-img-top img-fluid" src="{{ asset($perro->imagen) }}" alt="{{ $perro->nombre }}">
                                        <div class="card-body">
                                            <h5 class="card-title">{{ $perro->nombre }}</h5>
                                            <button class="btn btn-primary mt-2">Adóptame</button>
                                        </div>
                                    </div>
                                </div>
                                @endif
                                @endforeach
                            </div>
                        </div>
                        <div id="perrosadultos" class="tab-pane fade">
                            <div class="row">
                                @foreach($perros as $perro)
                                @if($perro->tipo == 'adultos')
                                <div class="col-md-4">
                                    <div class="card mb-3 card-perro" data-raza="{{ $perro->raza }}" data-enfermedades="{{ json_encode($perro->enfermedades) }}" data-vacunas="{{ json_encode($perro->vacunas) }}">
                                        <img class="card-img-top img-fluid" src="{{ asset($perro->imagen) }}" alt="{{ $perro->nombre }}">
                                        <div class="card-body">
                                            <h5 class="card-title">{{ $perro->nombre }}</h5>
                                            <button class="btn btn-primary mt-2">Adóptame</button>
                                        </div>
                                    </div>
                                </div>
                                @endif
                                @endforeach
                            </div>
                        </div>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="modalAdoptar" tabindex="-1" role="dialog" aria-labelledby="modalAdoptarLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalAdoptarLabel">Adoptar a <span id="modal-nombre"></span></h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <img id="modal-imagen" class="img-fluid" src="" alt="">
                                        </div>
                                        <div class="col-md-8">
                                            <p><strong>Raza:</strong> <span id="modal-raza"></span></p>
                                            <p><strong>Enfermedades:</strong> <span id="modal-enfermedades"></span></p>
                                            <p><strong>Vacunas:</strong> <span id="modal-vacunas"></span></p>
                                        </div>
                                    </div>
                                    <hr>
                                    <form id="form-adoptar" action="{{ route('adoptar') }}" method="POST">
                                        @csrf <!-- Laravel CSRF token -->
                                        <div class="form-group">
                                            <label for="nombre">Nombre</label>
                                            <input type="text" class="form-control" id="nombre" name="nombre" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="email">Email</label>
                                            <input type="email" class="form-control" id="email" name="email" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="telefono">Teléfono</label>
                                            <input type="tel" class="form-control" id="telefono" name="telefono" required>
                                        </div>
                                        <!-- Hidden input to store perro data -->
                                        <input type="hidden" id="perro-nombre" name="perro_nombre">
                                        <input type="hidden" id="perro-raza" name="perro_raza">
                                        <input type="hidden" id="perro-enfermedades" name="perro_enfermedades">
                                        <input type="hidden" id="perro-vacunas" name="perro_vacunas">
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                                    <button type="button" class="btn btn-primary" id="btn-adoptar">Adoptar</button>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div id="adoptar-route" data-route="{{ route('adoptar') }}"></div>

                </div>
            </div>
        </div>


        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

        <script>
            $(document).ready(function() {
                $('#form-filtros button').on('click', function(e) {
                    e.preventDefault();

                    var raza = $('#raza').val();
                    var enfermedades = $('#enfermedad').val();
                    var vacunas = $('#vacuna').val();

                    $('.card-perro').hide();

                    $('.card-perro').each(function() {
                        var perroRaza = $(this).data('raza');
                        var perroEnfermedades = String($(this).data('enfermedades')).split(',');
                        var perroVacunas = String($(this).data('vacunas')).split(',');

                        if ((!raza || raza === perroRaza) &&
                            (!enfermedades || enfermedades.every(enf => perroEnfermedades.includes(enf))) &&
                            (!vacunas || vacunas.every(vac => perroVacunas.includes(vac)))) {
                            $(this).show();
                        }
                    });
                });

                $('.nav-tabs a').on('click', function(e) {
                    e.preventDefault();
                    $(this).tab('show');
                });
                // Función para limpiar los filtros
                function limpiarFiltros() {
                    // Restablecer el valor de los campos de filtro
                    $('#raza').val('');
                    $('#enfermedad').val(null).trigger('change'); // Restablecer select2 si se está utilizando
                    $('#vacuna').val(null).trigger('change'); // Restablecer select2 si se está utilizando

                    // Mostrar todas las tarjetas de perro
                    $('.card-perro').show();
                }

                // Manejar el evento de clic en el botón de limpiar filtros
                $('#limpiar-filtros').on('click', function() {
                    limpiarFiltros();
                });

                $(document).ready(function() {
                    $('.btn-primary').click(function() {
                        var card = $(this).closest('.card-perro');
                        var nombre = card.find('.card-title').text();
                        var raza = card.data('raza');
                        var enfermedades = card.data('enfermedades');
                        var vacunas = card.data('vacunas');
                        var imagen = card.find('.card-img-top').attr('src');

                        $('#modal-nombre').text(nombre);
                        $('#modal-imagen').attr('src', imagen);
                        $('#modal-raza').text(raza);
                        $('#modal-enfermedades').text(Array.isArray(enfermedades) ? enfermedades.join(', ') : ''); // Check if enfermedades is an array
                        $('#modal-vacunas').text(Array.isArray(vacunas) ? vacunas.join(', ') : ''); // Check if vacunas is an array
                        $('#modalAdoptar').modal('show');
                    });
                });


                $('#btn-adoptar').click(function() {
                    var nombre = $('#nombre').val();
                    var email = $('#email').val();
                    var telefono = $('#telefono').val();
                    var perroNombre = $('#modal-nombre').text();
                    var perroRaza = $('#modal-raza').text();
                    var perroEnfermedades = $('#modal-enfermedades').text();
                    var perroVacunas = $('#modal-vacunas').text();

                    // Check if perro data is not empty
                    if (perroNombre && perroRaza && perroEnfermedades && perroVacunas) {
                        // Set the perro data to the hidden inputs
                        $('#perro-nombre').val(perroNombre);
                        $('#perro-raza').val(perroRaza);
                        $('#perro-enfermedades').val(perroEnfermedades);
                        $('#perro-vacunas').val(perroVacunas);

                        // Submit the form
                        $('#form-adoptar').submit();
                    } else {
                        // Handle the case where perro data is missing
                        console.error('Perro data is missing');
                        // You can show an alert or handle this case according to your needs
                    }
                });



            });
        </script>





</body>

</html>